ResContext.mnemonics = {
mSa:'A12',
xr:'A15',
Xrd:'A17',
sr:'A21',
mniw:'A33',
qiz:'A38',
iry:'A47',
Sps:'A50',
Spsi:'A51',
msi:'B3',
DHwty:'C3',
Xnmw:'C4',
inpw:'C6',
stX:'C7',
mnw:'C8',
mAat:'C10',
HH:'C11',
tp:'D1',
Hr:'D2',
Sny:'D3',
ir:'D4',
rmi:'D9',
wDAt:'D10',
fnD:'D19',
r:'D21',
rA:'D21',
spt:'D24',
spty:'D25',
mnD:'D27',
kA:'D28',
aHA:'D34',
a:'D36',
Dsr:'D45',
d:'D46',
Dba:'D50',
mt:'D52',
rd:'D56',
sbq:'D56',
gH:'D56',
gHs:'D56',
b:'D58',
ab:'D59',
wab:'D60',
sAH:'D61',
zzmt:'E6',
zAb:'E17',
mAi:'E22',
l:'E23',
rw:'E23',
Aby:'E24',
wn:'E34',
HAt:'F4',
SsA:'F5',
wsr:'F12',
wp:'F13',
db:'F16',
Hw:'F18',
bH:'F18',
ns:'F20',
idn:'F21',
msDr:'F21',
sDm:'F21',
DrD:'F21',
pH:'F22',
kfA:'F22',
xpS:'F23',
wHm:'F25',
Xn:'F26',
sti:'F29',
Sd:'F30',
ms:'F31',
X:'F32',
sd:'F33',
ib:'F34',
nfr:'F35',
zmA:'F36',
imAx:'F39',
Aw:'F40',
spr:'F42',
iwa:'F44',
isw:'F44',
pXr:'F46',
qAb:'F46',
A:'G1',
AA:'G2',
tyw:'G4',
mwt:'G14',
nbty:'G16',
m:'G17',
mm:'G18',
nH:'G21',
Db:'G22',
rxyt:'G23',
Ax:'G25',
dSr:'G27',
gm:'G28',
bA:'G29',
baHi:'G32',
aq:'G35',
wr:'G36',
gb:'G38',
zA:'G39',
pA:'G40',
xn:'G41',
wSA:'G42',
w:'G43',
ww:'G44',
mAw:'G46',
TA:'G47',
snD:'G54',
wSm:'H2',
pq:'H2',
pAq:'H3',
nr:'H4',
Sw:'H6',
aSA:'I1',
Styw:'I2',
mzH:'I3',
sbk:'I4',
sAq:'I5',
km:'I6',
Hfn:'I8',
f:'I9',
D:'I10',
DD:'I11',
in:'K1',
ad:'K3',
XA:'K4',
bz:'K5',
nSmt:'K6',
xpr:'L1',
bit:'L2',
srqt:'L7',
iAm:'M1',
Hn:'M2',
xt:'M3',
rnp:'M4',
tr:'M6',
SA:'M8',
zSn:'M9',
wdn:'M11',
xA:'M12',
wAD:'M13',
HA:'M16',
i:'M17',
ii:'M18',
sxt:'M20',
sm:'M21',
sw:'M23',
rsw:'M24',
Sma:'M26',
nDm:'M29',
bnr:'M30',
bdt:'M34',
Dr:'M36',
iz:'M40',
pt:'N1',
iAdt:'N4',
idt:'N4',
ra:'N5',
zw:'N5',
hrw:'N5',
Hnmmt:'N8',
pzD:'N9',
Abd:'N11',
iaH:'N11',
sbA:'N14',
dwA:'N14',
dwAt:'N15',
tA:'N16',
iw:'N18',
wDb:'N20',
spAt:'N24',
xAst:'N25',
Dw:'N26',
Axt:'N27',
xa:'N28',
q:'N29',
iAt:'N30',
n:'N35',
mw:'N35a',
S:'N37',
Sm:'N40',
id:'N41',
pr:'O1',
h:'O4',
Hwt:'O6',
aH:'O11',
wsxt:'O15',
kAr:'O18',
zH:'O22',
txn:'O25',
iwn:'O28',
aA:'O29',
zxnt:'O30',
z:'O34',
zb:'O35',
inb:'O36',
Szp:'O42',
ipt:'O45',
nxn:'O47',
niwt:'O49',
zp:'O50',
Snwt:'O51',
wHa:'P4',
nfw:'P5',
TAw:'P5',
aHa:'P6',
xrw:'P8',
st:'Q1',
wz:'Q2',
p:'Q3',
qrsw:'Q6',
xAwt:'R1',
xAt:'R1',
Htp:'R4',
kAp:'R5',
kp:'R5',
snTr:'R7',
nTr:'R8',
bd:'R9',
dd:'R11',
Dd:'R11',
imnt:'R14',
iAb:'R15',
wx:'R16',
xm:'R22',
HDt:'S1',
dSrt:'S3',
N:'S3',
sxmty:'S6',
xprS:'S7',
Atf:'S8',
Swty:'S9',
mDH:'S10',
wsx:'S11',
nbw:'S12',
tHn:'S15',
THn:'S15',
mnit:'S18',
sDAw:'S19',
xtm:'S20',
sT:'S22',
dmD:'S23',
Tz:'S24',
Sndyt:'S26',
mnxt:'S27',
s:'S29',
sf:'S30',
siA:'S32',
Tb:'S33',
anx:'S34',
Swt:'S35',
xw:'S37',
HqA:'S38',
awt:'S39',
wAs:'S40',
Dam:'S41',
abA:'S42',
xrp:'S42',
sxm:'S42',
md:'S43',
Ams:'S44',
nxxw:'S45',
HD:'T3',
HDD:'T6',
pd:'T9',
pD:'T10',
zin:'T11',
zwn:'T11',
sXr:'T11',
Ai:'T12',
Ar:'T12',
rwd:'T12',
rwD:'T12',
rs:'T13',
qmA:'T14',
wrrt:'T17',
Sms:'T18',
qs:'T19',
sn:'T22',
iH:'T24',
DbA:'T25',
Xr:'T28',
nmt:'T29',
sSm:'T31',
nm:'T34',
mA:'U1',
mr:'U6',
it:'U10',
HqAt:'U11',
hb:'U13',
Sna:'U13',
tm:'U15',
biA:'U16',
grg:'U17',
stp:'U21',
mnx:'U22',
Ab:'U23',
Hmt:'U24',
wbA:'U26',
DA:'U28',
rtH:'U31',
zmn:'U32',
ti:'U33',
xsf:'U34',
Hm:'U36',
mxAt:'U38',
'100':'V1',
sTA:'V2',
sTAw:'V3',
wA:'V4',
snT:'V5',
Ss:'V6',
Sn:'V7',
arq:'V12',
T:'V13',
iTi:'V15',
mDt:'V19',
XAr:'V19',
TmA:'V19',
'10':'V20',
mD:'V20',
mH:'V22',
wD:'V24',
aD:'V26',
H:'V28',
wAH:'V29',
sk:'V29',
nb:'V30',
k:'V31',
msn:'V32',
sSr:'V33',
idr:'V37',
bAs:'W2',
Hb:'W3',
Xnm:'W9',
iab:'W10',
nzt:'W11',
g:'W11',
Hz:'W14',
xnt:'W17',
mi:'W19',
Hnqt:'W22',
nw:'W24',
ini:'W25',
t:'X1',
rdi:'X8',
di:'X8',
mDAt:'Y1',
mnhd:'Y3',
zS:'Y3',
mn:'Y5',
ibA:'Y6',
zSSt:'Y8',
y:'Z4',
W:'Z7',
imi:'Z11',
x:'Aa1',
Hp:'Aa5',
qn:'Aa8',
mAa:'Aa11',
im:'Aa13',
gs:'Aa13',
M:'Aa13',
sA:'Aa17',
apr:'Aa20',
wDa:'Aa21',
nD:'Aa27',
qd:'Aa28',
Xkr:'Aa30'};
ResContext.unMnemonic =
function(code) {
	var key = ResContext.mnemonics[code];
	return key ? key : code;
};
ResContext.unBracket =
function(code) {
	if (code == "open")
		return "V11a";
	else if (code == "close")
		return "V11b";
	else
		return code;
};

ResContext.auxPoints = {
open:35,
close:36,
cartoucheopen:35,
cartouchesegment:37,
cartoucheclose:36,
ovalopen:35,
ovalsegment:37,
ovalclose:41,
serekhopen:38,
serekhsegment:37,
serekhclose:40,
inbopen:42,
inbsegment:44,
inbclose:43,
rectangleopen:38,
rectanglesegment:37,
rectangleclose:39,
Hwtopenoveropen:45,
Hwtopenoversegment:37,
Hwtopenoverclose:39,
Hwtopenunderopen:46,
Hwtopenundersegment:37,
Hwtopenunderclose:39,
Hwtcloseoveropen:38,
Hwtcloseoversegment:37,
Hwtcloseoverclose:47,
Hwtcloseunderopen:38,
Hwtcloseundersegment:37,
Hwtcloseunderclose:48,
hlr:49,
hrl:50,
vlr:51,
vrl:52};

ResContext.prototype.hieroPoints = ResContext.hieroPoints;
ResContext.prototype.mnemonics = ResContext.mnemonics;
ResContext.prototype.unMnemonic = ResContext.unMnemonic;
ResContext.prototype.unBracket = ResContext.unBracket;
ResContext.prototype.auxPoints = ResContext.auxPoints;

ResContext.tallSigns = [
"M40","Aa28","Aa29","P11","D16","T34","T35","U28",
"U29","U32","U33","S43","U36","T8","T8a","M13","M17",
"H6","H6a","M4","M12","S29","M29","M30","S37","R14",
"R15","R16","R17","P6","S40","R19","S41","F10",
"F11","F12","S38","S39","T14","T15","T13","Aa26",
"O30","Aa21","U39","F45","O44","Aa27","R8","R9",
"T7a","T3","T4","V24","V25","U23","S42",
"U34","S36","F28","U26","U27","U24","U25","Y8",
"F35","F36","U41","W19","P8","T22","T23","Z11",
"S44","Aa25","M44","V38","Aa31","Aa30","Aa20","V36",
"F31","M32","L7","V17","V18","S34","V39","Q7",
"T18","T19","T20","R21","R11","O28","O11","O36",
"Aa32","V28","V29"];
ResContext.broadSigns = [
"N1","N37","N38","N39","S32","N18","X4","X5",
"N17","N16","N20","Aa10","Aa11","Aa12","Aa13","Aa14",
"Aa15","N35","Aa8","Aa9","V26","V27","R24","W8",
"V32","Y1","Y2","R4","N11","N12","F42","D24",
"D25","D13","D15","F20","Z6","F33","T2","T7",
"F30","V22","V23","R5","R6","O34","V2","V3",
"S24","R22","R23","T11","O29","T1","T21","U20",
"U19","U21","D17","U31","T9","T9a","T10","F32",
"V13","V14","F46","F47","F48","F49","M11","U17",
"U18","U14","Aa7","F18","D51","U15","U16","Aa24",
"N31","O31","N36","D14","D21","D22","T30","T31",
"T33","D48","V30","V31","W3","S12","N30","O42",
"O43","V16"];
ResContext.narrowSigns = [
"Q3","O39","Z8","O47","N22","N21","N23","N29",
"X7","O45","O46","Y6","M35","X3","X2","X1",
"N28","Aa17","I6","W10","W10a","Aa4","R7","M39",
"M36","F43","F41","N34","U30","W11","W12","W13",
"T28","N41","N42","V37","M31","F34","W6","W7",
"W21","W20","V6","V33","V34","V7","V8","S20",
"V20","V19","Aa19","Aa2","Aa3","N32","F52","V35",
"H8","M41","F51","D11","K6","L6","F21","D26",
"N33","D12","S21","N5","N9","N10","Aa1","O50",
"O49","O48","X6","V9","S10","N6","N8","S11",
"N15","M42","F38","V1","Z7","Aa16","Z9","Z10"];

ResContext.categories = ["A","B","C","D","E","F","G","H","I",
"K","L","M","N","NL","NU","O","P","Q","R","S","T","U","V",
"W","X","Y","Z","Aa"];
ResContext.extraCategories = ["tall","broad","narrow"];
ResContext.categoriesAndExtra = ResContext.categories.concat(ResContext.extraCategories);
ResContext.catNameStructure = /^([A-I]|[K-Z]|(?:Aa)|(?:NL)|(?:NU))([1-9](?:[0-9][0-9]?)?)([a-z]?)$/;
ResContext.nonCatNameStructure = /^(("([^\t\n\r\f\b"\\]|(\\")|(\\\\))")|(0|([1-9]([0-9][0-9]?)?)))$/;
ResContext.mnemonicStructure = /^[a-zA-Z]+$/;
// Mapping from category to ordered list of names, after call of ResContext.makeCatToNames.
ResContext.catToNames = {};
ResContext.makeCatToNames =
function() {
	for (var name in ResContext.hieroPoints) {
		var parts = ResContext.catNameStructure.exec(name);
		var cat = parts[1];
		if (ResContext.catToNames[cat] === undefined)
			ResContext.catToNames[cat] = [];
		ResContext.catToNames[cat].push(name);
	}
	for (var i = 0; i < ResContext.categories.length; i++) {
		var cat = ResContext.categories[i];
		ResContext.catToNames[cat].sort(ResContext.compareSignNames);
	}
	ResContext.catToNames["tall"] = ResContext.tallSigns;
	ResContext.catToNames["broad"] = ResContext.broadSigns;
	ResContext.catToNames["narrow"] = ResContext.narrowSigns;
};
ResContext.compareSignNames =
function(name1, name2) {
	var parts1 = ResContext.catNameStructure.exec(name1);
	var parts2 = ResContext.catNameStructure.exec(name2);
	var cat1 = parts1[1];
	var cat2 = parts2[1];
	var num1 = parseInt(parts1[2]);
	var num2 = parseInt(parts2[2]);
	var suf1 = parts1[3];
	var suf2 = parts2[3];
	if (cat1 === cat2) {
		if (num1 < num2)
			return -1;
		else if (num1 > num2)
			return 1;
		else if (suf1 < suf2)
			return -1;
		else if (suf1 > suf2)
			return 1;
		else
			return 0;
	} else 
		return ResContext.categories.indexOf(cat1) - ResContext.categories.indexOf(cat2);
};
